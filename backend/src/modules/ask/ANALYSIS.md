# Ask (Sessions) Module Notes

Last updated: 2026-02-15

## Endpoints (All JWT Protected)

Controller: `backend/src/modules/ask/ask.controller.ts`

- `GET    /api/v1/ask/sessions`
- `POST   /api/v1/ask/sessions`
- `GET    /api/v1/ask/sessions/:id/messages`
- `DELETE /api/v1/ask/sessions/:id`

## Implementation Summary

Service: `backend/src/modules/ask/ask.service.ts`

- `getSessions(userId)`: lists sessions ordered by `updatedAt desc`, includes message count.
- `createSession(userId)`: creates a new session titled `New Chat`.
- `getMessages(sessionId, userId)`: verifies session exists for that user, then returns messages ordered by time.
- `deleteSession(sessionId, userId)`: verifies ownership, then deletes session (messages cascade via FK).

## Notes / Gaps

- No pagination/limits on messages list (could grow large).
- No endpoint to rename sessions; AI module currently auto-names based on first message.

<!-- AUTO-GENERATED:BEGIN -->
## Auto-Generated Snapshot

This section is generated by `scripts/gen-analysis-md.mjs`. Manual edits inside this block will be overwritten.

### Scope
- Directory: `backend/src/modules/ask`

### Detected Routes (NestJS)
- `GET  /api/v1/ask/sessions` (backend/src/modules/ask/ask.controller.ts)
- `POST /api/v1/ask/sessions` (backend/src/modules/ask/ask.controller.ts)
- `DELETE /api/v1/ask/sessions/:id` (backend/src/modules/ask/ask.controller.ts)
- `GET  /api/v1/ask/sessions/:id/messages` (backend/src/modules/ask/ask.controller.ts)

### File Tree (depth <= 3)
```text
ANALYSIS.md
ask.controller.ts
ask.module.ts
ask.service.ts
```
<!-- AUTO-GENERATED:END -->
