# Frontend App Router Notes

Last updated: 2026-02-15

## Layout / Global Styles

- `frontend/src/app/layout.tsx`
  - Sets basic metadata and wraps the app with `LanguageProvider`.
- `frontend/src/app/globals.css`
  - Tailwind v4 import and a small set of CSS variables for theme colors.

## Pages

- Main chat: `frontend/src/app/page.tsx`
  - Ensures a session exists before sending (creates via `/ask/sessions` when needed).
  - Uses a ref (`currentSessionIdRef`) to avoid stale session id during streaming.
  - Streams assistant response via `sendStreamChat()` and updates UI incrementally.
  - After stream completion, refreshes sessions list.
- Login/register: `frontend/src/app/login/page.tsx`
  - Local login/register via backend auth endpoints.
  - Google Sign-In uses Firebase client popup to obtain `idToken`, then calls backend `/auth/google`.
- Placeholder routes:
  - `frontend/src/app/coming-soon/page.tsx`
  - `frontend/src/app/not-found.tsx`
- Notifications: `frontend/src/app/notifications/page.tsx`
  - Local notification center with All/Unread filtering and read state stored in `localStorage`.
- Whatâ€™s New: `frontend/src/app/whats-new/page.tsx`
  - Changelog UI backed by `frontend/src/lib/changelog.ts`.

<!-- AUTO-GENERATED:BEGIN -->
## Auto-Generated Snapshot

This section is generated by `scripts/gen-analysis-md.mjs`. Manual edits inside this block will be overwritten.

### Scope
- Directory: `frontend/src/app`

### Detected Pages (Next.js App Router)
- `/` (frontend/src/app/page.tsx)
- `/admin` (frontend/src/app/admin/page.tsx)
- `/ai-explore` (frontend/src/app/ai-explore/page.tsx)
- `/ai-insights` (frontend/src/app/ai-insights/page.tsx)
- `/ai-insights/topic/[topicId]` (frontend/src/app/ai-insights/topic/[topicId]/page.tsx)
- `/ai-store` (frontend/src/app/ai-store/page.tsx)
- `/coming-soon` (frontend/src/app/coming-soon/page.tsx)
- `/login` (frontend/src/app/login/page.tsx)
- `/my-library` (frontend/src/app/my-library/page.tsx)
- `/notifications` (frontend/src/app/notifications/page.tsx)
- `/profile` (frontend/src/app/profile/page.tsx)
- `/teams` (frontend/src/app/teams/page.tsx)
- `/teams/[teamId]` (frontend/src/app/teams/[teamId]/page.tsx)
- `/todos` (frontend/src/app/todos/page.tsx)
- `/whats-new` (frontend/src/app/whats-new/page.tsx)

### File Tree (depth <= 3)
```text
admin/
admin/page.tsx
ai-explore/
ai-explore/AiExploreClient.tsx
ai-explore/page.tsx
ai-insights/
ai-insights/page.tsx
ai-insights/topic/
ai-insights/topic/[topicId]/
ai-insights/topic/[topicId]/page.tsx
ai-store/
ai-store/page.tsx
ANALYSIS.md
coming-soon/
coming-soon/page.tsx
globals.css
layout.tsx
login/
login/page.tsx
my-library/
my-library/page.tsx
not-found.tsx
notifications/
notifications/page.tsx
page.tsx
profile/
profile/page.tsx
teams/
teams/[teamId]/
teams/[teamId]/page.tsx
teams/page.tsx
todos/
todos/page.tsx
whats-new/
whats-new/page.tsx
```
<!-- AUTO-GENERATED:END -->
